<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="?#lJN~DqAUhNvCmv1OIo">mode</variable><variable id="}S]z*hmx/$tgr#32#_M/">lightLevel</variable><variable id="CYCCq`M(3BpD|KnqhCc.">permittedLightLevel</variable><variable id="PE@r8hX$MC1#n@A^sWwB">distance</variable></variables><block type="pxt-on-start" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let mode: number = 0" numlines="1" declaredvars="mode"></mutation><next><block type="variables_set"><field name="VAR" id="CYCCq`M(3BpD|KnqhCc.">permittedLightLevel</field><value name="VALUE"><shadow type="math_number"><field name="NUM">50</field></shadow></value><next><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let icon = IconNames.House" numlines="1" declaredvars="icon"></mutation></block></next></block></next></block></statement></block><block type="device_forever" x="466" y="20"><statement name="HANDLER"><block type="controls_if"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" editable="false"><field name="EXPRESSION">input.onButtonPressed(Button.A, function () {&#10;        mode = 1 &#10;    })</field></block></value><statement name="DO0"><block type="controls_if"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" editable="false"><field name="EXPRESSION">input.onButtonPressed(Button.B, function () {&#10;        mode = 2&#10;    })</field></block></value><statement name="DO0"><block type="device_while"><value name="COND"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="?#lJN~DqAUhNvCmv1OIo">mode</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block></value><statement name="DO"><block type="variables_set"><field name="VAR" id="}S]z*hmx/$tgr#32#_M/">lightLevel</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_light_level"/></value><next><block type="controls_if"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="}S]z*hmx/$tgr#32#_M/">lightLevel</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="CYCCq`M(3BpD|KnqhCc.">permittedLightLevel</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="basic.showIcon(icon)" numlines="1"></mutation></block></statement><statement name="ELSE"><block type="device_clear_display"/></statement></block></next></block></statement></block></statement></block></statement><next><block type="device_while"><value name="COND"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="?#lJN~DqAUhNvCmv1OIo">mode</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">2</field></shadow></value></block></value><statement name="DO"><block type="device_set_digital_pin"><field name="name">DigitalPin.P0</field><value name="value"><shadow type="math_number_minmax"><mutation min="0" max="1" label="Number" precision="0"/><field name="SLIDER">0</field></shadow></value><next><block type="control_wait_us"><value name="micros"><shadow type="math_number"><field name="NUM">2</field></shadow></value><next><block type="device_set_digital_pin"><field name="name">DigitalPin.P0</field><value name="value"><shadow type="math_number_minmax"><mutation min="0" max="1" label="Number" precision="0"/><field name="SLIDER">1</field></shadow></value><next><block type="control_wait_us"><value name="micros"><shadow type="math_number"><field name="NUM">10</field></shadow></value><next><block type="device_set_digital_pin"><field name="name">DigitalPin.P0</field><value name="value"><shadow type="math_number_minmax"><mutation min="0" max="1" label="Number" precision="0"/><field name="SLIDER">0</field></shadow></value><next><block type="variables_set"><field name="VAR" id="PE@r8hX$MC1#n@A^sWwB">distance</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_js_op"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="infix"></mutation><field name="OP">idiv</field><value name="ARG0"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="pins_pulse_in"><field name="name">DigitalPin.P11</field><field name="value">PulseValue.High</field></block></value><value name="ARG1"><shadow type="math_number"><field name="NUM">58</field></shadow></value></block></value><next><block type="device_show_number"><value name="number"><block type="variables_get"><field name="VAR" id="PE@r8hX$MC1#n@A^sWwB">distance</field></block></value><next><block type="device_pause"><value name="pause"><shadow type="timePicker"><field name="ms">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block></xml>